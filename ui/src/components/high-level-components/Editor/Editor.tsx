/* eslint-disable @typescript-eslint/ban-ts-comment */

import ReactQuill from 'react-quill';
import Quill from 'quill';
//@ts-ignore
import ImageResize from 'quill-image-resize-module-react';
import 'react-quill/dist/quill.snow.css';
import { useMode, FormData } from '@/context/DataContext';

Quill.register('modules/imageResize', ImageResize);

const Editor = () => {
	const { formData, setFormData, selectedInitiative, mode } = useMode();

	const icons = Quill.import('ui/icons');
	icons['bold'] =
		'<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M17.5 19.5H14V16.5H17.5C17.8978 16.5 18.2794 16.658 18.5607 16.9393C18.842 17.2206 19 17.6022 19 18C19 18.3978 18.842 18.7794 18.5607 19.0607C18.2794 19.342 17.8978 19.5 17.5 19.5ZM14 10.5H17C17.3978 10.5 17.7794 10.658 18.0607 10.9393C18.342 11.2206 18.5 11.6022 18.5 12C18.5 12.3978 18.342 12.7794 18.0607 13.0607C17.7794 13.342 17.3978 13.5 17 13.5H14V10.5ZM19.6 14.79C20.57 14.11 21.25 13 21.25 12C21.25 9.74 19.5 8 17.25 8H11V22H18.04C20.14 22 21.75 20.3 21.75 18.21C21.75 16.69 20.89 15.39 19.6 14.79Z" fill="#182C50"/></svg>';
	icons['italic'] = '<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14 8V11H16.21L12.79 19H10V22H18V19H15.79L19.21 11H22V8H14Z" fill="#182C50"/></svg>';
	icons['underline'] =
		'<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 25H23V23H9V25ZM16 21C17.5913 21 19.1174 20.3679 20.2426 19.2426C21.3679 18.1174 22 16.5913 22 15V7H19.5V15C19.5 15.9283 19.1313 16.8185 18.4749 17.4749C17.8185 18.1313 16.9283 18.5 16 18.5C15.0717 18.5 14.1815 18.1313 13.5251 17.4749C12.8687 16.8185 12.5 15.9283 12.5 15V7H10V15C10 16.5913 10.6321 18.1174 11.7574 19.2426C12.8826 20.3679 14.4087 21 16 21Z" fill="#182C50"/></svg>';
	icons.list['ordered'] =
		'<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11 17V15H25V17H11ZM11 23V21H25V23H11ZM11 11V9H25V11H11ZM7 12V9H6V8H8V12H7ZM6 21V20H9V24H6V23H8V22.5H7V21.5H8V21H6ZM8.25 14C8.44891 14 8.63968 14.079 8.78033 14.2197C8.92098 14.3603 9 14.5511 9 14.75C9 14.95 8.92 15.14 8.79 15.27L7.12 17H9V18H6V17.08L8 15H6V14H8.25Z" fill="#182C50"/></svg>';
	icons.list['bullet'] =
		'<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11 9H25V11H11V9ZM11 17V15H25V17H11ZM8 8.5C8.39782 8.5 8.77936 8.65804 9.06066 8.93934C9.34196 9.22064 9.5 9.60218 9.5 10C9.5 10.3978 9.34196 10.7794 9.06066 11.0607C8.77936 11.342 8.39782 11.5 8 11.5C7.60218 11.5 7.22064 11.342 6.93934 11.0607C6.65804 10.7794 6.5 10.3978 6.5 10C6.5 9.60218 6.65804 9.22064 6.93934 8.93934C7.22064 8.65804 7.60218 8.5 8 8.5ZM8 14.5C8.39782 14.5 8.77936 14.658 9.06066 14.9393C9.34196 15.2206 9.5 15.6022 9.5 16C9.5 16.3978 9.34196 16.7794 9.06066 17.0607C8.77936 17.342 8.39782 17.5 8 17.5C7.60218 17.5 7.22064 17.342 6.93934 17.0607C6.65804 16.7794 6.5 16.3978 6.5 16C6.5 15.6022 6.65804 15.2206 6.93934 14.9393C7.22064 14.658 7.60218 14.5 8 14.5ZM11 23V21H25V23H11ZM8 20.5C8.39782 20.5 8.77936 20.658 9.06066 20.9393C9.34196 21.2206 9.5 21.6022 9.5 22C9.5 22.3978 9.34196 22.7794 9.06066 23.0607C8.77936 23.342 8.39782 23.5 8 23.5C7.60218 23.5 7.22064 23.342 6.93934 23.0607C6.65804 22.7794 6.5 22.3978 6.5 22C6.5 21.6022 6.65804 21.2206 6.93934 20.9393C7.22064 20.658 7.60218 20.5 8 20.5Z" fill="#182C50"/></svg>';
	icons['image'] =
		'<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.9 9.8C11.1879 9.8 9.8 11.1879 9.8 12.9V17.1065L11.9351 14.8494C12.437 14.3134 13.1306 14 13.8677 14C14.6058 14 15.3003 14.3143 15.8024 14.8515L17.4807 16.648L18.2556 15.8186C18.7576 15.2813 19.4521 14.9668 20.1903 14.9668C20.8691 14.9668 21.5108 15.2326 22 15.693V12.9C22 11.1879 20.6121 9.8 18.9 9.8H12.9ZM12.9 22C11.4406 22 10.2168 20.9916 9.88731 19.6336L13.2444 16.0845L13.2481 16.0806C13.4235 15.8929 13.6479 15.8 13.8677 15.8C14.0875 15.8 14.3119 15.893 14.4874 16.0806L16.8125 18.5695C16.819 18.5766 16.8255 18.5836 16.8322 18.5906L18.6294 20.5144C18.9688 20.8776 19.5383 20.897 19.9015 20.5576C20.2647 20.2183 20.2841 19.6488 19.9448 19.2856L18.7123 17.9663L19.5708 17.0474C19.7462 16.8597 19.9705 16.7668 20.1903 16.7668C20.4074 16.7668 20.6291 16.8575 20.8037 17.0409L22 18.3845V18.9C22 20.6121 20.6121 22 18.9 22H12.9ZM8 12.9C8 10.1938 10.1938 8 12.9 8H18.9C21.6062 8 23.8 10.1938 23.8 12.9V18.9C23.8 21.6062 21.6062 23.8 18.9 23.8H12.9C10.1938 23.8 8 21.6062 8 18.9V12.9ZM17.6778 12.2333C17.1255 12.2333 16.6778 12.681 16.6778 13.2333C16.6778 13.7856 17.1255 14.2333 17.6778 14.2333H17.6867C18.239 14.2333 18.6867 13.7856 18.6867 13.2333C18.6867 12.681 18.239 12.2333 17.6867 12.2333H17.6778Z" fill="#182C50"/></svg>';
	icons['link'] =
		'<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M20.1057 8.00018C18.8865 7.98958 17.7119 8.45828 16.8349 9.30531L15.5356 10.5969C15.1831 10.9474 15.1815 11.5172 15.5319 11.8697C15.8824 12.2222 16.4522 12.2239 16.8047 11.8734L18.0898 10.5958C18.6268 10.0793 19.3449 9.79363 20.0901 9.80011C20.8374 9.8066 21.5522 10.1063 22.0806 10.6348C22.609 11.1632 22.9087 11.878 22.9152 12.6252C22.9217 13.3701 22.6363 14.0877 22.1204 14.6247L19.8762 16.8689C19.5872 17.1579 19.2395 17.3814 18.8566 17.5243C18.4737 17.6671 18.0646 17.7259 17.6569 17.6967C17.2493 17.6675 16.8527 17.551 16.4941 17.3551C16.1355 17.1591 15.8231 16.8883 15.5784 16.5611C15.2806 16.1631 14.7166 16.0818 14.3186 16.3795C13.9206 16.6772 13.8393 17.2412 14.137 17.6393C14.5364 18.1732 15.0459 18.615 15.6311 18.9347C16.2162 19.2543 16.8633 19.4445 17.5284 19.4921C18.1934 19.5397 18.861 19.4438 19.4857 19.2107C20.1104 18.9777 20.6778 18.6129 21.1492 18.1414L23.3991 15.8916L23.41 15.8804C24.2571 15.0034 24.7258 13.8288 24.7152 12.6096C24.7046 11.3904 24.2155 10.2241 23.3534 9.36195C22.4912 8.49981 21.325 8.01077 20.1057 8.00018ZM15.187 13.2009C14.5219 13.1533 13.8543 13.2493 13.2296 13.4823C12.6049 13.7153 12.0375 14.0801 11.5662 14.5516L9.31627 16.8015L9.30531 16.8127C8.45828 17.6897 7.98958 18.8642 8.00018 20.0834C8.01077 21.3026 8.49981 22.4689 9.36195 23.3311C10.2241 24.1932 11.3904 24.6823 12.6096 24.6929C13.8288 24.7034 15.0034 24.2348 15.8804 23.3877L15.8916 23.3768L17.1741 22.0943C17.5255 21.7428 17.5255 21.1729 17.1741 20.8215C16.8226 20.47 16.2527 20.47 15.9013 20.8215L14.6247 22.0981C14.0877 22.614 13.3701 22.8994 12.6252 22.8929C11.878 22.8864 11.1632 22.5867 10.6347 22.0583C10.1063 21.5299 9.8066 20.8151 9.80011 20.0678C9.79364 19.323 10.079 18.6053 10.595 18.0683L12.8392 15.8242C13.1281 15.5351 13.4758 15.3116 13.8587 15.1688C14.2416 15.026 14.6508 14.9671 15.0584 14.9963C15.466 15.0255 15.8626 15.1421 16.2212 15.338C16.5799 15.5339 16.8922 15.8047 17.137 16.132C17.4347 16.53 17.9987 16.6113 18.3967 16.3136C18.7948 16.0159 18.8761 15.4518 18.5784 15.0538C18.179 14.5199 17.6694 14.0781 17.0843 13.7584C16.4991 13.4387 15.8521 13.2486 15.187 13.2009Z" fill="#182C50"/></svg>';

	const modules = {
		toolbar: [
			['bold', 'italic', 'underline'],
			[{ list: 'ordered' }, { list: 'bullet' }],
			['image', 'link'],
		],

		imageResize: {
			modules: ['Resize', 'DisplaySize'],
		},
	};
	const formats = ['bold', 'italic', 'underline', 'list', 'bullet', 'image', 'link'];

	const handleChange = (content: string) => {
		setFormData((prevFormData: FormData) => ({
			...prevFormData,
			post: content,
		}));
	};

	return (
		<ReactQuill
			readOnly={mode === 'view'}
			modules={modules}
			formats={formats}
			onChange={handleChange}
			value={formData?.post || selectedInitiative?.post || ''}
			theme='snow'
			placeholder='Input an abstract/description regarding your initiative'
		/>
	);
};

export default Editor;
